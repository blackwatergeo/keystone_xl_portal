//>>built
define(["./basePortalUrlUtils"],function(n){function l(a,e){function b(d,e){var c,g,h,f,k="widgetOnScreen"===d;if(a[d]){if(a[d].groups)for(c=0;c<a[d].groups.length;c++){h=a[d].groups[c];e(h,{index:c,isWidget:!1,groupId:h.id,isThemeWidget:!1,isOnScreen:k});for(g=0;g<a[d].groups[c].widgets.length;g++)f=a[d].groups[c].widgets[g],e(f,{index:g,isWidget:!0,groupId:h.id,isThemeWidget:f.uri&&-1<f.uri.indexOf("themes/"+a.theme.name),isOnScreen:k})}if(a[d].widgets)for(c=0;c<a[d].widgets.length;c++)f=a[d].widgets[c],
e(a[d].widgets[c],{index:c,isWidget:!0,groupId:d,isThemeWidget:f.uri&&-1<f.uri.indexOf("themes/"+a.theme.name),isOnScreen:k})}}b("widgetOnScreen",e);b("widgetPool",e)}var b={},m="inPanel hasLocale hasStyle hasConfig hasUIFile hasSettingPage hasSettingUIFile hasSettingLocale hasSettingStyle keepConfigAfterMapSwithched isController hasVersionManager isThemeWidget".split(" ");b.visitElement=l;b.getConfigElementById=function(a,e){var b;if("map"===e)return a.map;l(a,function(a){if(a.id===e)return b=a,
!0});return b};b.getWidgetNameFromUri=function(a){a=a.split("/");a.pop();return a.pop()};b.getAmdFolderFromUri=function(a){a=a.split("/");a.pop();return a.join("/")+"/"};b.widgetProperties=m;b.processWidgetProperties=function(a){"undefined"===typeof a.properties.isController&&(a.properties.isController=!1);"undefined"===typeof a.properties.isThemeWidget&&(a.properties.isThemeWidget=!1);"undefined"===typeof a.properties.hasVersionManager&&(a.properties.hasVersionManager=!1);m.forEach(function(b){"undefined"===
typeof a.properties[b]&&(a.properties[b]=!0)})};b.isHostedService=function(a){var b=n.getServerByUrl(a)+"/[^/]+/[^/]+/rest/services";return RegExp(b,"gi").test(a)};return b});